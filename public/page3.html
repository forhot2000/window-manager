<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>page 3 - site 2</title>
  </head>
  <body>
    <h2>page 3 - site 2</h2>
    <button id="btn_send">send</button>
    <button id="btn_close">close</button>
    <button id="btn_invalid">invalid</button>

    <script src="/js/framework.js"></script>
    <script>
      (function () {
        const framework = new Framework({
          targetOrigin: "http://localhost:3000",
        });

        const btn_send = document.getElementById("btn_send");
        btn_send.addEventListener("click", async function (e) {
          try {
            const windows = await framework.listWindows();
            console.log("all windows: %O", windows);
          } catch (err) {
            console.error(err);
          }
        });

        const btn_close = document.getElementById("btn_close");
        btn_close.addEventListener("click", function (e) {
          framework.closeWindow();
        });

        const btn_invalid = document.getElementById("btn_invalid");
        btn_invalid.addEventListener("click", async function (e) {
          try {
            await framework.sendMessage({ command: "XXX" });
          } catch (err) {
            console.error(err);
          }
        });
      })();
    </script>
  </body>
</html>
